{# @var craft \craft\web\twig\variables\CraftVariable #}
{# @var model \nystudio107\units\models\UnitsData #}
{# @var field \nystudio107\units\fields\Units #}
{#
/**
 * Units plugin for Craft CMS 3.x
 *
 * Units Field Input
 *
 * @author    nystudio107
 * @copyright Copyright (c) 2018 nystudio107
 * @link      https://nystudio107.com/
 * @package   Units
 * @since     1.0.0
 */
#}

{% import "_includes/forms" as forms %}

{% do view.registerAssetBundle("nystudio107\\units\\assetbundles\\units\\UnitsAsset") %}
{% do view.registerAssetBundle("nystudio107\\units\\assetbundles\\unitsfield\\UnitsFieldAsset") %}

<div class="flex units-field">
    {% if field.prefix %}
        <div>
            {{ field.prefix|md(inlineOnly=true)|raw }}
        </div>
    {% endif %}
    <div>
        {{ forms.textField({
            id: id ~ "value",
            name: name ~ "[value]",
            value: value,
            size: field.size,
            unit: not field.changeableUnits ? field.defaultUnits
        }) }}
    </div>
    <div>
        {% if field.changeableUnits %}
            <div class="field units-field-units-select">
                {{ forms.select({
                    id: id ~ "units",
                    name: name ~ "[units]",
                    options: model.allowedUnitsOptions,
                    value: model.units,
                }) }}
            </div>
        {% endif %}
    </div>
    {% if field.suffix %}
        <div>
            {{ field.suffix|md(inlineOnly=true)|raw }}
        </div>
    {% endif %}
</div>
